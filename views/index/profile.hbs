<section class="sec-2">
  <div class="container pt-5">
    <div class="main-body">
      <div class="row">
        <div class="col-lg-4">
          <div class="card-1">
            <div class="card-body">
              <div class="d-flex flex-column align-items-center text-center">
                <div class="pro-image">
                  {{#if user.image}}
                    <img
                      src="/images/user-images/{{user._id}}.jpg"
                      class="p-1"
                      width="110"
                    />
                  {{else}}
                    <img
                      src="/images/avathar.png"
                      class="p-1 rounded-circle"
                      width="110"
                    />
                  {{/if}}
                </div>
                <i class="fas fa-camera"></i>
                <div class="mt-3">
                  <h4 class="text-Cap">{{user.name}}</h4>
                  <p class="text-secondary text-Cap mb-1">{{user.job}}</p>
                  <p class="text-muted text-Cap font-size-sm">{{user.location}},
                    kannur, Kerala</p>
                  <button class="btn btn-outline-primary btn-edit">Edit Profile</button>
                  <a
                    class="btn-password btn btn-outline-primary m-1"
                    href="change-password"
                  >Change Password</a>
                </div>
              </div>
              <hr class="my-4" />
              {{#if user.verified}}{{else}}
                <button
                  class="btn btn-danger primary mail-btn"
                  onclick="verifyProfile()"
                >
                  <span class="btn-text">Verify Account</span></button>
              {{/if}}
            </div>
          </div>
        </div>
        <div class="col-lg-8">
          <div class="card-1">
            <div class="card-body">
              <form action="/edit-profile" method="POST">
                <!--
                //--------------------------
                <div class="row mb-3">
                  <div class="col-sm-3">
                    <h6 class="mb-0"></h6>
                  </div>
                  <div class="col-sm-9 text-secondary">
                    <input
                      autocomplete="off"
                      hidden
                      name="id"
                      class="form-control"
                      value="{{user._id}}"
                    />
                  </div>
                </div>
                //-----------------------
                -->
                <div class="row mb-3">
                  <div class="col-sm-3">
                    <h6 class="mb-0">Full Name</h6>
                  </div>
                  <div class="col-sm-9 text-secondary">
                    <input
                      autocomplete="off"
                      required
                      readonly
                      name="name"
                      type="text"
                      class="form-control text-Cap"
                      value="{{user.name}}"
                      minlength="5"
                    />
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col-sm-3">
                    <h6 class="mb-0">Phone</h6>
                  </div>
                  <div class="col-sm-9 text-secondary">
                    <input
                      autocomplete="off"
                      required
                      name="mob"
                      readonly
                      type="text"
                      class="form-control"
                      value="{{user.mobile}}"
                      minlength="10"
                      maxlength="10"
                    />
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col-sm-3">
                    <h6 class="mb-0">Email</h6>
                  </div>
                  <div class="col-sm-9 text-secondary">
                    <input
                      autocomplete="off"
                      required
                      readonly
                      name="email"
                      type="email"
                      class="form-control"
                      value="{{user.email}}"
                    />
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col-sm-3">
                    <h6 class="mb-0">Location</h6>
                  </div>
                  <div class="col-sm-9 text-secondary">

                    <select class="text-Cap" name="location" disabled>
                      <option
                        selected
                        value="{{user.location}}"
                      >{{user.location}}</option>
                    </select>
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col-sm-3">
                    <h6 class="mb-0">Job</h6>
                  </div>
                  <div class="col-sm-9 text-secondary">
                    <select disabled class="text-Cap" name="job">
                      <option
                        selected
                        value="{{user.job}}"
                      >{{user.job}}</option>

                    </select>
                    <p class="p-para">Job and Location can't edit. If needed
                      contact us.</p>
                  </div>
                </div>
                <div class="row">

                  <div class="col-sm-2 text-secondary btn-discard">
                    <button
                      class="btn btn-outline-secondary"
                      onclick="history.go(0)"
                    >Cancel</button>
                  </div>
                  <div class="col-sm-2 text-secondary btn-save m-1">
                    <button type="submit" class="btn btn-primary px-4">Save
                    </button>
                  </div>
                  <div class="col-sm-8 btn-dummy"></div>
                </div>
              </form>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
</section>
<section class="popup-editImage">
  <div class="card-2">
    <div class="exit-image">
      <i class="fas fa-times"></i>
    </div>
    <div class="card-body">
      <div class="d-flex flex-column align-items-center text-center">
        <div class="percent">
          <svg>
            <circle cx="55" cy="55" r="52"></circle>
            <circle class="cir-2" cx="55" cy="55" r="52"></circle>
          </svg>
        </div>
        <div class="pro-image">
          {{#if user.image}}
            <img
              src="/images/user-images/{{user._id}}.jpg"
              class="p-1 active-360"
              width="110"
              id="imgView"
            />
          {{else}}
            <img
              src="/images/avathar.png"
              class="p-1"
              width="110"
              id="imgView"
            />
          {{/if}}
        </div>
        <div class="mt-3">
          <form
            action="/edit-image/{{user._id}}"
            method="post"
            enctype="multipart/form-data"
            class="editImage-form"
          >
            <input type="hidden" id="user-id" value="{{user._id}}" />
            <input
              class="m-3"
              type="file"
              name="image"
              id="image"
              accept="image/png, image/jpeg"
              id=""
              onchange="viewImage(event)"
              required
              hidden
            />
            <label class="btn btn-outline-primary" for="image">Choose a Image</label><br
            />
            <input class="mb-3 btn btn-primary" type="submit" value="Change" />
          </form>
          <a
            href="/remove-image/{{user._id}}"
            class="delete-image btn btn-danger"
          >Delete Current Profile</a>

        </div>
      </div>
    </div>
  </div>
</section>

<script>
  function viewImage(event){var request = new XMLHttpRequest();
  request.open('POST','demo',true); let data = new
  FormData(document.querySelector(".editImage-form"));
  request.upload.addEventListener("progress", (e)=>{
  $("circle").css("visibility","visible");
  $(".cir-2").css("stroke-dashoffset",`calc(326 - (326 *
  ${e.loaded/e.total}))`); setInterval(()=>{
  $("circle").css("visibility","hidden"); },2000);}); request.send(data);
  document.getElementById("imgView").src =
  URL.createObjectURL(event.target.files[0]) ; }
</script>